<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Leste RP - Formulário Staff</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Poppins', sans-serif;
            background-color: #0f172a;
        }

        .purple-glow:hover {
            box-shadow: 0 0 15px #8b5cf6;
        }

        .shake {
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        .toast {
            position: fixed;
            top: 20px;
            right: -400px;
            transition: right 0.3s ease;
            z-index: 1000;
        }

        .toast.show {
            right: 20px;
        }

        .tooltip {
            position: relative;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #1e293b;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body class="text-gray-200">
    <!-- Toast Notification -->
    <div id="toast" class="toast w-full max-w-sm bg-gray-800 border-l-4 border-purple-500 rounded-lg shadow-lg overflow-hidden">
        <div class="flex items-center px-4 py-3">
            <div class="p-2 rounded-full bg-purple-500 text-white mr-3">
                <i class="fas fa-info-circle"></i>
            </div>
            <div class="flex-1">
                <p id="toast-message" class="text-sm">Mensagem de notificação</p>
            </div>
            <button onclick="hideToast()" class="text-gray-400 hover:text-white">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-gray-900 bg-opacity-80 z-50 flex items-center justify-center hidden">
        <div class="text-center">
            <div class="animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-purple-500 mx-auto mb-4"></div>
            <p class="text-purple-400 text-xl font-semibold">Enviando formulário...</p>
        </div>
    </div>

    <!-- Form Container -->
    <div class="min-h-screen flex items-center justify-center p-4">
        <div class="w-full max-w-2xl bg-gray-800 rounded-xl shadow-2xl overflow-hidden">
            <!-- Header -->
            <div class="bg-gradient-to-r from-gray-900 to-purple-900 p-6 text-center relative">
                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-purple-500 to-transparent"></div>
                <h1 class="text-3xl font-bold text-white mb-2">
                    <span class="text-purple-400">LESTE</span> ROLEPLAY
                </h1>
                <p class="text-purple-200">Formulário para Staff</p>
                <div class="absolute top-3 right-3 tooltip">
                    <button id="helpBtn" class="text-gray-300 hover:text-white">
                        <i class="fas fa-question-circle text-xl"></i>
                    </button>
                    <span class="tooltiptext">Preencha todos os campos corretamente. O formulário será enviado para nossa equipe.</span>
                </div>
            </div>

            <!-- Form -->
            <form id="staffForm" class="p-6 space-y-6">
                <!-- Personal Information Section -->
                <div class="space-y-4">
                    <h2 class="text-xl font-semibold text-purple-400 border-b border-gray-700 pb-2">Informações Pessoais</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="nickname" class="block text-sm font-medium mb-1">Nickname no SA-MP</label>
                            <input type="text" id="nickname" name="nickname" required 
                                   class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" 
                                   placeholder="Seu nickname">
                        </div>
                        
                        <div>
                            <label for="discord" class="block text-sm font-medium mb-1">Discord (ex: nome#1234)</label>
                            <input type="text" id="discord" name="discord" required 
                                   class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" 
                                   placeholder="Seu Discord completo">
                        </div>
                    </div>
                    
                    <div>
                        <label for="age" class="block text-sm font-medium mb-1">Idade</label>
                        <input type="number" id="age" name="age" min="14" max="99" required 
                               class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" 
                               placeholder="Sua idade">
                    </div>
                </div>

                <!-- Staff Application Section -->
                <div class="space-y-4">
                    <h2 class="text-xl font-semibold text-purple-400 border-b border-gray-700 pb-2">Candidatura</h2>
                    
                    <div>
                        <label class="block text-sm font-medium mb-1">Você tem conhecimento em comandos administrativos?</label>
                        <div class="flex space-x-4">
                            <label class="inline-flex items-center">
                                <input type="radio" name="conhecimento" value="Sim" class="text-purple-500" required>
                                <span class="ml-2">Sim</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="conhecimento" value="Não" class="text-purple-500">
                                <span class="ml-2">Não</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="conhecimento" value="Parcial" class="text-purple-500">
                                <span class="ml-2">Parcialmente</span>
                            </label>
                        </div>
                    </div>
                    
                    <div>
                        <label for="staffAnterior" class="block text-sm font-medium mb-1">Você já foi staff em outro servidor? Onde e qual cargo exerceu?</label>
                        <textarea id="staffAnterior" name="staffAnterior" rows="3" required 
                                  class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" 
                                  placeholder="Informe o servidor e cargo, caso já tenha sido staff"></textarea>
                    </div>
                    
                    <div>
                        <label for="tempo" class="block text-sm font-medium mb-1">Tempo disponível diário (horas)</label>
                        <input type="number" id="tempo" name="tempo" min="1" max="24" required 
                               class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" 
                               placeholder="Horas por dia">
                    </div>
                    
                    <div>
                        <label for="experiencia" class="block text-sm font-medium mb-1">Experiência anterior</label>
                        <textarea id="experiencia" name="experiencia" rows="3" required 
                                  class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" 
                                  placeholder="Descreva suas experiências anteriores como staff"></textarea>
                    </div>
                    
                    <div>
                        <label for="motivacao" class="block text-sm font-medium mb-1">Por que quer ser staff?</label>
                        <textarea id="motivacao" name="motivacao" rows="3" required 
                                  class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" 
                                  placeholder="Explique sua motivação"></textarea>
                    </div>
                </div>

                <!-- Captcha -->
                <div class="mt-6">
                    <label for="captcha" class="block mb-1 font-semibold text-purple-400">Para evitar bots, responda:</label>
                    <p class="mb-2">Qual é o nome correto do servidor? (Digite em letras maiúsculas)</p>
                    <input type="text" id="captcha" name="captcha" required
                        class="w-full px-4 py-2 rounded border border-gray-600 bg-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                        placeholder="Exemplo: LESTE ROLEPLAY" autocomplete="off" />
                    <input type="hidden" id="correctCaptcha" value="LESTE ROLEPLAY" />
                </div>

                <div class="text-center mt-6">
                    <button id="submitBtn" type="submit" class="px-10 py-3 bg-purple-600 hover:bg-purple-700 rounded-lg font-semibold transition duration-300">
                        Enviar Formulário
                    </button>
                </div>
            </form>

            <!-- Footer -->
            <div class="bg-gray-900 p-4 text-center text-gray-400 text-sm mt-4">
                &copy; 2024 Leste RP - Todos os direitos reservados
            </div>
        </div>
    </div>

    <!-- SCRIPT: corrigido e completo -->
    <script>
        // Form Submission
        document.getElementById('staffForm').addEventListener('submit', function(e) {
            e.preventDefault();

            // Check cooldown (4 hours)
            const lastSubmission = localStorage.getItem('lastStaffSubmission');
            if (lastSubmission) {
                const now = new Date().getTime();
                const cooldown = 4 * 60 * 60 * 1000; // 4 horas em ms

                if (now - lastSubmission < cooldown) {
                    const remaining = Math.ceil((cooldown - (now - lastSubmission)) / (60 * 60 * 1000));
                    showToast(`⏳ Você só pode enviar um formulário a cada 4 horas!\nTente novamente em aproximadamente ${remaining} hora(s).`, 'error');
                    return;
                }
            }

            const form = e.target;
            const captcha = document.getElementById('captcha').value.toUpperCase();
            const correctCaptcha = document.getElementById('correctCaptcha').value.toUpperCase();

            // Validate captcha
            if (captcha !== correctCaptcha) {
                showToast('🚨 Resposta anti-bot incorreta!\nO nome correto do servidor é "LESTE ROLEPLAY"', 'error');
                const captchaInput = document.getElementById('captcha');
                captchaInput.value = '';
                captchaInput.classList.add('border-red-500', 'shake');
                setTimeout(() => captchaInput.classList.remove('shake'), 500);
                return;
            }

            // Show loading
            document.getElementById('loadingOverlay').classList.remove('hidden');
            document.getElementById('submitBtn').disabled = true;

            // Collect form data
            const formData = new FormData(form);
            const data = {};
            formData.forEach((value, key) => {
                data[key] = value;
            });

            // Create Discord embed
            const embed = {
                title: "📝 𝗡𝗢𝗩𝗔 𝗖𝗔𝗡𝗗𝗜𝗗𝗔𝗧𝗨𝗥𝗔 𝗦𝗧𝗔𝗙𝗙",
                color: 0x8b5cf6,
                thumbnail: {
                    url: "https://imgur.com/OVH8tC9.gif"
                },
                fields: [
                    { name: "🎮 𝗡𝗜𝗖𝗞𝗡𝗔𝗠𝗘", value: data.nickname || "❌ Não informado", inline: true },
                    { name: "💬 𝗗𝗜𝗦𝗖𝗢𝗥𝗗", value: data.discord || "❌ Não informado", inline: true },
                    { name: "🎂 𝗜𝗗𝗔𝗗𝗘", value: data.age ? `${data.age} anos` : "❌ Não informado", inline: true },
                    { name: "🧠 𝗖𝗢𝗡𝗛𝗘𝗖𝗜𝗠𝗘𝗡𝗧𝗢 𝗔𝗗𝗠", value: data.conhecimento || "❌ Não informado", inline: true },
                    { name: "🕒 𝗧𝗘𝗠𝗣𝗢 𝗗𝗜𝗔́𝗥𝗜𝗢", value: data.tempo ? `${data.tempo} horas/dia` : "❌ Não informado", inline: true },
                    { name: "🏆 𝗦𝗧𝗔𝗙𝗙 𝗔𝗡𝗧𝗘𝗥𝗜𝗢𝗥", value: data.staffAnterior || "🚫 Nenhuma experiência" },
                    { name: "✨ 𝗘𝗫𝗣𝗘𝗥𝗜𝗘̂𝗡𝗖𝗜𝗔", value: data.experiencia || "🚫 Nenhuma experiência" },
                    { name: "💡 𝗠𝗢𝗧𝗜𝗩𝗔𝗖̧𝗔̃𝗢", value: data.motivacao || "❌ Não informado" }
                ],
                timestamp: new Date().toISOString(),
                footer: {
                    text: "🎯 Leste RP - Formulário Staff"
                }
            };

            // Send to Discord webhook
            fetch('https://discord.com/api/webhooks/1382604245575929897/abq-wQ20-VX_EWZnnaJ7_CaMn5tkULKXk22ru1flNcCJJ7sWoMRnd6uqGODYAzpyYOqu', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ embeds: [embed] })
            })
            .then(response => {
                document.getElementById('loadingOverlay').classList.add('hidden');
                if (response.ok) {
                    showToast('Formulário enviado com sucesso! Entraremos em contato pelo Discord.', 'success');
                    form.reset();
                    localStorage.setItem('lastStaffSubmission', new Date().getTime());
                } else {
                    showToast('Erro ao enviar formulário. Por favor, tente novamente.', 'error');
                }
                document.getElementById('submitBtn').disabled = false;
            })
            .catch(error => {
                document.getElementById('loadingOverlay').classList.add('hidden');
                showToast('Erro ao conectar com o servidor. Por favor, tente novamente.', 'error');
                document.getElementById('submitBtn').disabled = false;
            });
        });

        // Toast Notification Functions
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');

            toastMessage.textContent = message;
            toast.classList.add('show');

            switch(type) {
                case 'success':
                    toast.style.borderLeftColor = '#22c55e'; // verde
                    break;
                case 'error':
                    toast.style.borderLeftColor = '#ef4444'; // vermelho
                    break;
                default:
                    toast.style.borderLeftColor = '#8b5cf6'; // roxo padrão
            }

            clearTimeout(toast.timeoutId);
            toast.timeoutId = setTimeout(() => {
                hideToast();
            }, 100);
        }

        function hideToast() {
            const toast = document.getElementById('toast');
            toast.classList.remove('show');
        }
    </script>
</body>
</html>
